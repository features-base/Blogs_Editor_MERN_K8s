name: Dockerize and deploy using ACR and ACA
on:
  push:
    branches:
      - save4
jobs:
  Build:
    name: Azure-Build-and-Deploy
    runs-on: ubuntu-latest
    steps:
      - name: Log in to Azure
        uses: azure/login@v2 
        with: 
          creds: ${{ secrets.AZURE_CREDENTIALS }}
          # auth-type: IDENTITY
          # tenant-id: ae92ab08-68cc-4b76-aef4-4fdbe2a7a452
          # client-id: cd2f214a-e44c-461e-b50c-e66a85be5f90
          # subscription-id: 83fe0721-a84c-467f-838f-60400f5a476d  

      - name: Build and deploy Container App
        uses: azure/container-apps-deploy-action@v1
        with:
          appSourcePath: ${{ github.workspace }}
          acrName: articles
          imageToBuild: articles.azurecr.io/github/testworking
          containerAppName: articles1
          resourceGroup: showcase
          acrUsername: karansdexpert@gmail.com
          acrPassword: sw25@$SW